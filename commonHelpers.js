import{a as I,i as c,S}from"./assets/vendor-eded45c0.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const a of t)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(t){const a={};return t.integrity&&(a.integrity=t.integrity),t.referrerPolicy&&(a.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?a.credentials="include":t.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(t){if(t.ep)return;t.ep=!0;const a=s(t);fetch(t.href,a)}})();const h=document.querySelector(".loader"),p=document.querySelector(".loader2");function d(){h.classList.add("visually-hidden"),p.classList.add("visually-hidden")}async function f(r,e){const s="43234755-a337228de2a5121df872aa78d";e.currentPage===1?h.classList.remove("visually-hidden"):p.classList.remove("visually-hidden");try{const o=await I.get("https://pixabay.com/api/",{params:{key:s,q:r,image_type:"photo",orientation:"horizontal",safesearch:!0,per_page:100,page:e.currentPage}});return e.currentPage+=1,o}catch(o){throw new Error(o.message)}}function y(r){return r.map(({webformatURL:e,tags:s,largeImageURL:o,likes:t,views:a,comments:i,downloads:b})=>`<li class='card'><a class="gallery-link" href="${o}"><img class='image' src='${e}' alt='${s}'></a>
        <div class='description'>
        <div class='title-text'><h4 class='title'>Likes</h4><p class='text'>${t}</p></div>
        <div class='title-text'><h4 class='title'>Views</h4><p class='text'>${a}</p></div>
        <div class='title-text'><h4 class='title'>Comments</h4><p class='text'>${i}</p>
        </div><div class='title-text'><h4 class='title'>Downloads</h4><p class='text'>${b}</p></div>
        </div></li>`).join("")}const v=document.querySelector(".form"),g=document.querySelector(".searchInput"),l=document.querySelector(".list"),u=document.querySelector(".submitBtn"),n=document.querySelector(".loadMore"),m={currentPage:1};u.disabled=!0;function C(r,e){localStorage.setItem(r,e)}function w(r){const e=localStorage.getItem(r);return e||null}g.addEventListener("input",()=>{g.value.trim()!==""?u.disabled=!1:u.disabled=!0});v.addEventListener("submit",P);n.addEventListener("click",q);async function P(r){r.preventDefault();const e=g.value.trim();if(m.currentPage=1,e!==""){l.innerHTML="",n.classList.add("visually-hidden"),C("searchInputValue",e);try{const s=await f(e,m);if(s.data.hits.length===0)d(),c.error({message:"Sorry, there are no images matching your search query. Please try again!",position:"topRight",backgroundColor:"#EF4040",messageColor:"#fff",timeout:3e3});else{d(),l.insertAdjacentHTML("beforeend",y(s.data.hits)),L.refresh();const o=setInterval(()=>{if([...l.querySelectorAll("img")].every(i=>i.complete)){clearInterval(o);const i=Math.ceil(s.data.totalHits/s.config.params.per_page);if(s.config.params.page>=i)return c.warning({position:"topRight",backgroundColor:"#00A36C",message:"We're sorry, but you've reached the end of search results."});n.classList.remove("visually-hidden")}},50)}v.reset(),u.disabled=!0}catch(s){d(),c.error({message:`${s}`,position:"topRight",backgroundColor:"#EF4040",messageColor:"#fff",timeout:3e3})}}}async function q(){n.classList.add("visually-hidden");const r=w("searchInputValue");try{const e=await f(r,m);console.log(e);const s=Math.ceil(e.data.totalHits/e.config.params.per_page);d(),l.insertAdjacentHTML("beforeend",y(e.data.hits)),L.refresh(),x();const o=setInterval(()=>{if([...l.querySelectorAll("img")].every(i=>i.complete)){if(clearInterval(o),e.config.params.page>=s)return n.classList.add("visually-hidden"),c.warning({position:"topRight",backgroundColor:"#00A36C",message:"We're sorry, but you've reached the end of search results."})}else n.classList.remove("visually-hidden")},50)}catch(e){console.log(e),d(),c.error({message:`${e}`,position:"topRight",backgroundColor:"#EF4040",messageColor:"#fff",timeout:3e3})}}function x(){const e=l.firstElementChild.getBoundingClientRect().height;window.scrollBy({top:e*2,behavior:"smooth"})}const L=new S(".list a",{captionsData:"alt",captionDelay:250});
//# sourceMappingURL=commonHelpers.js.map
